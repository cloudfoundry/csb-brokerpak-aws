# Copyright 2020 Pivotal Software, Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http:#www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
---
version: 1
name: csb-aws-docdb
id: ____
description: CSB AWS DocDB
display_name: CSB AWS DocDB
image_url: file://service-images/csb.png
documentation_url: 
provider_display_name: VMware
support_url: https://aws.amazon.com/documentdb/
tags: [aws, docdb]
plan_updateable: true
provision:
  user_inputs:
    - field_name: master_username
      type: string
      details: (Required) User name for connecting to the cluster
      default: _______
      plan_updateable: true
      prohibit_update: true
    - field_name: master_password
      type: string
      details: (Required) Password for connecting to the cluster
      default: _______
      plan_updateable: true
      prohibit_update: true
    - field_name: apply_immediately
      type: boolean
      details: (Optional) Specifies whether any cluster modifications are applied immediately, or during the next maintenance window. Default is false.
      default: false
      plan_updateable: true
      prohibit_update: true
    - field_name: availability_zones
      type: (Optional) A list of EC2 Availability Zones that instances in the DB cluster can be created in.
      details: 
      default: 
      plan_updateable: true
      prohibit_update: true
    - field_name: backup_retention_period
      type: 
      details: (Optional) The days to retain backups for. Default 1
      default: 1
      plan_updateable: true
      prohibit_update: true
    - field_name: cluster_identifier_prefix
      type: string
      details: (Optional, Forces new resource) Creates a unique cluster identifier beginning with the specified prefix. Conflicts with cluster_identifier.
      default: _______
      plan_updateable: true
      prohibit_update: true
    - field_name: cluster_identifier
      type: string
      details: (Optional, Forces new resources) The cluster identifier. If omitted, Terraform will assign a random, unique identifier.
      default: _______
      plan_updateable: true
      prohibit_update: true
    - field_name: db_subnet_group_name
      type: string
      details: (Optional) A DB subnet group to associate with this DB instance.
      default: _______
      plan_updateable: true
      prohibit_update: true
    - field_name: db_cluster_parameter_group_name
      type: string
      details: (Optional) A cluster parameter group to associate with the cluster.
      default: 
      plan_updateable: true
      prohibit_update: true
    - field_name: deletion_protection
      type: boolean
      details: (Optional) A value that indicates whether the DB cluster has deletion protection enabled. The database can't be deleted when deletion protection is enabled. By default, deletion protection is disabled.
      default: false
      plan_updateable: true
      prohibit_update: true
    - field_name: enabled_cloudwatch_logs_exports
      type: string
      details: (Optional) List of log types to export to cloudwatch. If omitted, no logs will be exported. The log supported are audit and profiler.
      default: 
      plan_updateable: true
      prohibit_update: true
    - field_name: engine_version
      type: string
      details: (Optional) The database engine version. Updating this argument results in an outage.
      default: ${docdb_version}
      plan_updateable: true
      prohibit_update: true
    - field_name: engine
      type: string
      details: (Optional) The name of the database engine to be used for this DB cluster. Defaults to docdb. Valid value is docdb.
      default: docdb
      plan_updateable: true
      prohibit_update: true
    - field_name: final_snapshot_identifier
      type: string
      details: (Optional) The name of your final DB snapshot when this DB cluster is deleted. If omitted, no final snapshot will be made.
      default: 
      plan_updateable: true
      prohibit_update: true
    - field_name: global_cluster_identifier
      type: string
      details: (Optional) The global cluster identifier specified on aws_docdb_global_cluster.
      default: 
      plan_updateable: true
      prohibit_update: true
    - field_name: kms_key_id
      type: string
      details: (Optional) The ARN for the KMS encryption key. When specifying kms_key_id, storage_encrypted needs to be set to true.
      default: 
      plan_updateable: true
      prohibit_update: true
    - field_name: port 
      type: 
      details: (Optional) The port on which the DB accepts connections
      default: 
      plan_updateable: true
      prohibit_update: true
    - field_name: preferred_backup_windowv
      type: string
      details: (Optional) The daily time range during which automated backups are created if automated backups are enabled using the BackupRetentionPeriod parameter. Time in UTC Default is a 30-minute window selected at random from an 8-hour block of time per region E.g., 04:00-09:00
      default: 
      plan_updateable: true
      prohibit_update: true
    - field_name: preferred_maintenance_window
      type: string
      details: (Optional) The weekly time range during which system maintenance can occur, in (UTC) e.g., wed:04:00-wed:04:30
      default: 
      plan_updateable: true
      prohibit_update: true
    - field_name: skip_final_snapshot
      type: boolean
      details: (Optional) Determines whether a final DB snapshot is created before the DB cluster is deleted. If true is specified, no DB snapshot is created. If false is specified, a DB snapshot is created before the DB cluster is deleted, using the value from final_snapshot_identifier. Default is false.
      default: false
      plan_updateable: true
      prohibit_update: true
    - field_name: snapshot_identifier
      type: 
      details: (Optional) Specifies whether or not to create this cluster from a snapshot. You can use either the name or ARN when specifying a DB cluster snapshot, or the ARN when specifying a DB snapshot.
      default: 
      plan_updateable: true
      prohibit_update: true
    - field_name: storage_encrypted
      type: 
      details: (Optional) Specifies whether the DB cluster is encrypted. The default is false.
      default: false
      plan_updateable: true
      prohibit_update: true
    - field_name: tags
      type: 
      details: (Optional) A map of tags to assign to the DB cluster. If configured with a provider default_tags configuration block present, tags with matching keys will overwrite those defined at the provider-level.
      default: 
      plan_updateable: true
      prohibit_update: true
    - field_name: vpc_security_group_ids 
      type: 
      details: (Optional) List of VPC security groups to associate with the Cluster
      default: 
      plan_updateable: true
      prohibit_update: true
  computed_inputs:
  - name: labels
    default: ${json.marshal(request.default_labels)}
    overwrite: true
    type: object
  template_refs:
    main: terraform/docdb/provision/main.tf
    outputs: terraform/docdb/provision/outputs.tf
    provider: terraform/docdb/provision/provider.tf
    versions: terraform/docdb/provision/versions.tf
    variables: terraform/docdb/provision/variables.tf
    data: terraform/docdb/provision/data.tf
  outputs:
  - field_name: arn
    type: string
    details: Amazon Resource Name (ARN) of cluster
  - field_name: cluster_members
    type: string
    details: List of DocDB Instances that are a part of this cluster
  - field_name: cluster_resource_id
    type: string
    details: The DocDB Cluster Resource ID
  - field_name: endpoint
    type: string
    details: The DNS address of the DocDB instance
  - field_name: hosted_zone_id
    type: 
    details: The Route53 Hosted Zone ID of the endpoint
  - field_name: id
    type: string
    details: The DocDB Cluster Identifier
  - field_name: reader_endpoint
    type: string
    details: A read-only endpoint for the DocDB cluster, automatically load-balanced across replicas
  - field_name: tags_all
    type: string
    details: A map of tags assigned to the resource, including those inherited from the provider default_tags configuration block.
bind:
  plan_inputs: []
  user_inputs: 
  - field_name: 
    type: 
    details: 
    default: 
  - field_name: 
    type: 
    details: 
    default:   
  computed_inputs:
  - name: arn
    default: ${instance.details["arn"]}
    overwrite: true
    type: string
  - name: region
    default: ${instance.details["region"]}
    overwrite: true
    type: string
  - name: 
    default: 
    overwrite: 
    type: 
  template_refs:
    data: terraform/docdb/bind/data.tf
    main: terraform/docdb/bind/main.tf
    outputs: terraform/docdb/bind/outputs.tf
    provider: terraform/docdb/bind/provider.tf
    versions: terraform/docdb/bind/versions.tf
    variables: terraform/docdb/bind/variables.tf
  outputs:
  - field_name: 
    type: 
    details: 
  - field_name: 
    type: 
    details: 
examples:
- name: 
  description: 
  plan_id: 
  provision_params: {}
  bind_params: {}
- name: 
  description: 
  plan_id: 
  provision_params: {}
  bind_params: {}
